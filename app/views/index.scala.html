@(title: String)

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>@title</title>

        <link rel="stylesheet" href="@routes.Assets.at("css/style.css")">
        <link rel="stylesheet" href="@routes.Assets.at("css/redmond/jquery-ui.css")">
        <link rel="stylesheet" href="@routes.Assets.at("css/redmond/jquery.ui.theme.css")">
        <link rel="stylesheet" href="@routes.Assets.at("css/jqgrid/ui.jqgrid.css")">

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js" type="text/javascript"></script>
        <script src="http://www.trirand.com/blog/jqgrid/js/jquery.jqGrid.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="@routes.Application.javascriptRoutes"></script>

        <script>
            var lastSel = 1;

            // attach grid
            $(document).ready(function() {
                jQuery(dataTable).jqGrid({
                    url: "@routes.Application.envs()",
                    datatype: "json",
                    height: 'auto',
                    colNames:['Name','Description','','','','','','',''],
                    colModel:[
                        {name:'name',index:'name', width:100},
                        {name:'descr',index:'descr', width:280},
                        {name:'version',hidden: true},
                        {name:'tomcat',hidden: true},
                        {name:'wso2',hidden: true},
                        {name:'wsdl',hidden: true},
                        {name:'psql',hidden: true},
                        {name:'ssh',hidden: true},
                        {name:'ip',hidden: true}
                    ],
                    viewrecords: true,
                    loadonce: true,
                    caption: "VirtualHosts",
                    onSelectRow: function(id){
                        if(id && id!==lastSel){
                           $(this).restoreRow(lastSel);
                           lastSel=id;
                        }
                        var name = jQuery(this).getRowData(lastSel)['name'];
//                      populateForm('#evnDetail', env);

                        jsRoutes.controllers.Application.env(name).ajax({
                            success: function(data) {
                                $("#detail").html(data);
                            },
                            error: showError
                        });
                    }
                });
                $("#reloadBtn").click(function(){
                    $.get("@routes.Application.reload()", "", reloadGrid).fail(showError);
                });
            });

            function showError(errorData){
                $("#detail").html(errorData.responseText);
            }
            function reloadGrid(gridData){
                $("#dataTable").jqGrid('setGridParam', {data: gridData}).trigger('reloadGrid');
                $("#detail").empty()
            }
            function populateForm(frm, data) {
                $.each(data, function(key, value){
                    $('[name='+key+']', frm).val(value);
                });
            }
        </script>
    </head>
    <body>
        <header>@title</header>
        <section>
            <table>
                <tr>
                    <td style="vertical-align: top">
                        <div>
                            <table id="dataTable"></table>
                            <button id="reloadBtn">Reload</button>
                        </div>
                    </td>
                    <td style="vertical-align: top">
                        <div id="detail"></div>
                    </td>
                </tr>
            </table>
        </section>
    </body>
</html>